# 7.3 Знакомство с PageComponent
[назад](../readme.md)

Содержание:
- [Знакомство с Page Component](#знакомство-с-page-component)
- [Создаем BaseComponent](#создаем-basecomponent)
- [Создаем NavbarComponent с помощью PageComponent](#создаем-navbarcomponent-с-помощью-pagecomponent)
- [Используем NavbarComponent в автотестах](#используем-navbarcomponent-в-автотестах)
- [Создаем SidebarComponent с помощью PageComponent](#создаем-sidebarcomponent-с-помощью-pagecomponent)
- [Практика работы с Page Component](#практика-работы-с-page-component)

## Знакомство с Page Component
### Основная идея
**PageComponent** позволяет выделять отдельные логические блоки веб-страницы в независимые компоненты, которые можно многократно использовать. Этот подход особенно полезен, если на одной странице используется несколько одинаковых элементов (например, карточки товаров, формы комментариев или кнопки). Таким образом, повторяющиеся элементы описываются один раз, что значительно упрощает сопровождение тестов.
### Отличия между POM и PageComponent:
- **POM** (Page Object Model) обычно описывает всю страницу целиком, взаимодействуя с различными элементами страницы через методы.
- **PageComponent** фокусируется на отдельных, часто повторяющихся компонентах, которые могут использоваться на разных страницах. Это помогает избежать дублирования кода и делает его более поддерживаемым.

Хотя оба паттерна тесно связаны, POM и PageComponent не являются взаимозаменяемыми. Их следует использовать вместе, а не выбирать один конкретный. В простых сценариях, где компоненты на странице не повторяются и не сложны, POM достаточно. Однако, когда компоненты повторяются на нескольких страницах или содержат сложную логику, использование PageComponent значительно упрощает код и делает его более гибким.

### Когда использовать POM и PageComponent
- **POM** хорошо подходит для простых страниц, где элементы уникальны, и нет необходимости выделять их в отдельные компоненты.
- **PageComponent** полезен для страниц с повторяющимися компонентами (карточки товаров, формы, таблицы) или для сложных логических блоков.

###  Преимущества совместного использования POM и PageComponent:
- **Модульность**: Компоненты можно легко переиспользовать на разных страницах, уменьшая дублирование кода.
- **Легкость сопровождения**: Изменения в логике одного компонента не требуют изменений на уровне всей страницы.
- **Гибкость**: Код становится более читаемым и понятным, так как логика взаимодействия с отдельными компонентами страницы изолирована.
- **Масштабируемость**: Новые компоненты или изменения на страницах добавляются быстрее, не затрагивая существующую структуру.

### Резюме
POM и PageComponent — это взаимодополняющие паттерны, которые вместе обеспечивают структурированный подход к автоматизации UI тестирования. **POM** организует логику взаимодействия с целыми страницами, в то время как **PageComponent** выделяет отдельные, повторяющиеся элементы на странице. Их совместное использование помогает достичь лучшей модульности, чистоты и поддерживаемости кода, что особенно важно для крупных и сложных веб-приложений. 

[вверх](#73-знакомство-с-pagecomponent)


## Создаем BaseComponent
В **PageComponent** все компоненты будут наследоваться от *BaseComponent*. Это будет простой класс, который на данном этапе не будет содержать никаких методов, кроме конструктора. Его основная задача — задать единый интерфейс для всех компонентов и обеспечить их единообразную инициализацию.
1. Создаем файл *base_component.py*
    ```
    .
    └── components/
        ├── __init__.py
        └── base_component.py
    ```

2. Создаем класс *BaseComponent*  
В файле *base_component.py* создаем базовый класс
3. Добавление общих методов
    - Проверка текущего URL

[вверх](#73-знакомство-с-pagecomponent)


## Создаем NavbarComponent с помощью PageComponent
Navbar (навигационная панель) — это элемент интерфейса, который обычно используется для перемещения по различным разделам приложения. Navbar может содержать ссылки на страницы, название приложения или данные пользователя (например, email или имя пользователя).

Navbar — это универсальный компонент, который используется на нескольких страницах, таких как *CoursesListPage*, *CreateCoursePage*, и *DashboardPage*. Это делает его отличным кандидатом для реализации через PageComponent, так как он не привязан к конкретной странице, а является общим для нескольких страниц приложения.

1. Создаем файл *navbar_component.py*
    ```
    .
    └── components/
        ├── navigation/
        │   ├── __init__.py
        │   └── navbar_component.py
        ├── __init__.py
        └── base_component.py
    ```
2. Создаем класс *NavbarComponent*  
В файле *navbar_component.py* создаем класс *NavbarComponent* и наследуем его от *BaseComponent*
3. Добавляем локаторы
4. Добавляем методы

[вверх](#73-знакомство-с-pagecomponent)


## Используем NavbarComponent в автотестах
Для демонстрации работы с автотестами напишем тест test_dashboard_displaying, который проверит корректное отображение страницы Dashboard, а также корректность отображения Navbar компонента.
1. Интегрируем NavbarComponent на страницу Dashboard
2. Пишем автотест test_dashboard_displaying
    ```
    .
    └── tests/
        └── test_dashboard.py
    ```
3. Используем NavbarComponent в автотестах

[вверх](#73-знакомство-с-pagecomponent)


## Создаем SidebarComponent с помощью PageComponent
Создадим компонент *SidebarComponent*, используя паттерн **PageComponent**. Этот компонент будет более сложным, чем предыдущие, поскольку он будет состоять из других компонентов, т.е. включать вложенные компоненты.
1. Изучаем компонент Sidebar  
  Компонент *Sidebar* состоит всего из трех кнопок, каждая кнопка состоит из трех элементов:
    1. icon (иконка),
    2. title (заголовок),
    3. button (кнопка).  

    Все локаторы соответствуют шаблону:
    - {identifier}-drawer-list-item-icon
    - {identifier}-drawer-list-item-title-text
    - {identifier}-drawer-list-item-button
2. Реализуем компонент SidebarListItemComponent  
Создадим файл *sidebar_list_item_component.py* в папке *components/navigation*
   ```
    .
    └── components/
        ├── navigation/
        │   ├── __init__.py
        │   ├── navbar_component.py
        │   └── sidebar_list_item_component.py # Добавляем этот файл
        ├── __init__.py
        └── base_component.py
   ```
3. Реализуем компонент SidebarComponent  
    ```
    .
    └── components/
        ├── navigation/
        │   ├── __init__.py
        │   ├── navbar_component.py
        │   ├── sidebar_component.py # Добавляем этот файл
        │   └── sidebar_list_item_component.py
        ├── __init__.py
        └── base_component.py
    ```

[вверх](#73-знакомство-с-pagecomponent)


## Практика работы с Page Component
[Ссылка на описание практического задания](./homework.md)

[вверх](#73-знакомство-с-pagecomponent)
