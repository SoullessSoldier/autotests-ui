# 7.5. Знакомство с PageFactory
[назад](../readme.md)

Ссылки:
- [Первая статья о PageFactory на Python](https://habr.com/ru/articles/708932/)
- [Подробно о паттерне PageFactory](https://habr.com/ru/articles/896936/)

Содержание:
- [Особенности Page Factory](#особенности-page-factory)
- [Пример в Playwright](#пример-в-playwright)
- [Из чего состоит Page Factory?](#из-чего-состоит-page-factory)
- [Особенности подхода](#особенности-подхода)
- [Основные элементы подход](#основные-элементы-подхода)
- [Преимущества использования PageFactory в автоматизации тестирования](#преимущества-использования-pagefactory-в-автоматизации-тестирования)
- [Создаем BaseElement](#создаем-baseelement)
- [Создаем элементы с помощью Page Factory](#создаем-элементы-с-помощью-page-factory)
- [Использование компонентов Page Factory на странице LoginPage](#использование-компонентов-page-factory-на-странице-loginpage)
- [Работа с динамическими локаторами в компоненте CreateCourseExerciseFormComponent с помощью Page Factory](#работа-с-динамическими-локаторами-в-компоненте-createcourseexerciseformcomponent-с-помощью-page-factory)
- [Практика работы с Page Factory (домашнее задание)](#практика-работы-с-page-factory-домашнее-задание)

  
  

**Page Factory** — это паттерн, который позволяет эффективнее управлять элементами на веб-странице при автоматизации тестирования.  
Если рассмотреть иерархию работы с веб-страницей, то весь паттерн **Page Object Model (POM)** состоит из компонентов (**Page Components**), которые, в свою очередь, состоят из атомарных элементов. И вот именно здесь паттерн **Page Factory** помогает нам организовать работу с этими элементами.

## Особенности Page Factory

Page Factory особенно широко используется в Java с библиотеками, такими как Selenium, где он автоматизирует поиск и инициализацию элементов страницы. Но, хотя его основная реализация предназначена для Java, его концепции легко адаптировать и для других языков, включая Python. Главная задача Page Factory — это обеспечение работы с каждым элементом страницы как с отдельным объектом, который легко находить и взаимодействовать с ним.

Однако при использовании библиотеки Playwright, элементы страницы уже представляются в виде объектов. Таким образом, Page Factory фактически встроен в Playwright.

[вверх](#75-знакомство-с-pagefactory)

## Пример в Playwright:
Когда мы пишем код вроде:
```python
self.title = page.get_by_test_id("page-title")
```
мы уже работаем с объектом *Locator*, который встроен в Playwright. Это означает, что Playwright изначально предоставляет удобный способ взаимодействия с элементами страницы, похожий на **Page Factory**. Мы можем обращаться к элементам страницы как к объектам с методами для взаимодействия, и нам не нужно вручную искать и инициализировать их, как это было бы в традиционной реализации Page Factory.

[вверх](#75-знакомство-с-pagefactory)


## Из чего состоит Page Factory?
В Python нет универсального подхода для реализации паттерна Page Factory, и он не так широко распространён, как, например, в Java. Это объясняется тем, что в течение долгого времени Selenium для Python не имел встроенной поддержки Page Factory, поэтому единообразного решения в сообществе не сложилось. Даже если вы попытаетесь найти информацию об этом в интернете, её будет крайне мало.

[вверх](#75-знакомство-с-pagefactory)


## Особенности подхода
В этом курсе автор предлагает вам подход, который он разработал за годы работы в автоматизации тестирования. Основная идея заключается в создании базового класса для работы с элементами на странице, по аналогии с тем, как мы создаём базовые классы для страниц (**BasePage**) или компонентов (**BaseComponent**).

[вверх](#75-знакомство-с-pagefactory)


## Основные элементы подхода
1. Базовый класс BaseElement
2. Наследование для специализированных элементов

[вверх](#75-знакомство-с-pagefactory)


## Преимущества использования PageFactory в автоматизации тестирования
1. Семантическое разделение
2. Инкапсуляция
3. Разделение интерфейсов
4. Логирование и Allure шаги
5. Переопределение функциональности
6. Динамическое форматирование локаторов
7. Вербозность и ясность отчетов
8. Фокус на бизнес-логику
9. Простота

[вверх](#75-знакомство-с-pagefactory)


## Создаем BaseElement
1. Создание класса BaseElement
  Сразу договоримся, что все элементы будут находиться в папке *elements*, поэтому давайте создадим папку *elements* в корне проекта *autotests-ui* и добавим в нее файл *base_element.py*
2. Метод для инициализации локатора
3. Базовые методы
  - click
  - check_visible
  - check_have_text

[вверх](#75-знакомство-с-pagefactory)


## Создаем элементы с помощью Page Factory
Мы уже реализовали класс *BaseElement*, но сам по себе он не предназначен для непосредственного использования в автотестах. На данном этапе нам нужно создать компоненты, которые можно будет интегрировать в тесты. Эти компоненты будут представлять собой конкретные элементы интерфейса, такие как:
- *Button*
- *Input*
- *FileInput*
- *Textarea*
- *Link*
- *Text*
- *Icon*
- *Image*

[вверх](#75-знакомство-с-pagefactory)


## Использование компонентов Page Factory на странице LoginPage

[вверх](#75-знакомство-с-pagefactory)


## Работа с динамическими локаторами в компоненте CreateCourseExerciseFormComponent с помощью Page Factory

[вверх](#75-знакомство-с-pagefactory)

## Практика работы с Page Factory (домашнее задание)
[Ссылка на описание практического задания](./homework.md)

[вверх](#75-знакомство-с-pagefactory)