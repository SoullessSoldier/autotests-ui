# 7.6 Практические применения PageFactory в автотестах
[назад](../readme.md)

Содержание:
- [Переписываем компонент CourseViewComponent с использованием Page Factory](#переписываем-компонент-courseviewcomponent-с-использованием-page-factory)
- [Переписываем компонент CourseViewMenuComponent с использованием Page Factory](#переписываем-компонент-courseviewmenucomponent-с-использованием-page-factory)
- [Переписываем компонент ChartViewComponent с использованием Page Factory](#переписываем-компонент-chartviewcomponent-с-использованием-page-factory)
- [Практикуемся в применении Page Factory (домашняя работа)](#практикуемся-в-применении-page-factory-домашняя-работа)

## Переписываем компонент CourseViewComponent с использованием Page Factory
Компонент CourseViewComponent отличается от всех предыдущих компонентов тем, что на странице может присутствовать несколько его экземпляров. 
Ранее для взаимодействия с ними мы использовали индексы, например, для проверки заголовка:
```python
expect(self.title.nth(index)).to_be_visible()
expect(self.title.nth(index)).to_have_text(title)
```
                  
На данный момент компоненты Page Factory не поддерживают работу с индексами элементов, поэтому давайте добавим эту функциональность. Для этого модифицируем метод get_locator в классе BaseElement.

До:  
```python
def get_locator(self, **kwargs) -> Locator:
    locator = self.locator.format(**kwargs)
    return self.page.get_by_test_id(locator)
```
                  
После:  
```python
def get_locator(self, nth: int = 0, **kwargs) -> Locator:
    # Добавляем аргумент nth со значением по умолчанию 0
    locator = self.locator.format(**kwargs)
    return self.page.get_by_test_id(locator).nth(nth)  # Теперь выбираем элемент по индексу
```

### Модификация методы компонентов BaseElement, Button, Input, FileInput, Textarea

### Переписываем компонент CourseViewComponent

[вверх](#76-практические-применения-pagefactory-в-автотестах)


## Переписываем компонент CourseViewMenuComponent с использованием Page Factory
**Что изменилось:**
1. **Компоненты заменены на Page Factory**: Элементы меню теперь представлены в виде компонентов *Button*, что делает код более модульным и удобным для изменения. Каждый элемент меню (кнопка) теперь передается с помощью класса *Button*, где используются параметры *locator* и *name*

2. **Работа с индексами**: Для того чтобы выбрать нужный элемент из нескольких на странице, мы передаем аргумент *nth=index*, что позволяет работать с элементами по индексу. Это полезно, если на странице присутствует несколько экземпляров одного и того же элемента.

3. **Масштабируемость**: Использование Page Factory позволяет легко адаптировать код к изменениям на странице и поддерживать его актуальность при изменениях в структуре DOM. Если потребуется добавить новый элемент меню, это можно сделать всего лишь добавив новый *Button* в компонент.

[вверх](#76-практические-применения-pagefactory-в-автотестах)


## Переписываем компонент ChartViewComponent с использованием Page Factory
Теперь мы перепишем компонент *ChartViewComponent*, применяя паттерн Page Factory. Этот компонент специфичен тем, что использует графики в виде изображений SVG. У нас нет отдельного компонента для графиков, но есть компонент *Image*, который мы будем использовать для работы с графиками.

[вверх](#76-практические-применения-pagefactory-в-автотестах)


## Практикуемся в применении Page Factory (домашняя работа)
[ссылка на описание домашней работы](./homework.md)

[вверх](#76-практические-применения-pagefactory-в-автотестах)